---
// src/pages/index.astro
import "../styles/global.css";

const sports = [
  { slug: "baseball", label: "Baseball", icon: "‚öæ" },
  { slug: "basketball", label: "Basketball", icon: "üèÄ" },
  { slug: "football", label: "Football", icon: "üèà" },
];

const buildStamp = new Date().toISOString();
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Card Gallery</title>
  </head>

  <body class="min-h-screen bg-zinc-950 text-zinc-100">
    <main class="mx-auto max-w-6xl px-4 py-10">
      <div class="rounded-3xl bg-gradient-to-b from-zinc-900/40 to-zinc-950 ring-1 ring-zinc-800 p-8 relative overflow-hidden">
        <div class="absolute -top-24 -right-20 h-72 w-72 rounded-full bg-indigo-500/10 blur-3xl"></div>
        <div class="absolute -bottom-20 -left-16 h-72 w-72 rounded-full bg-emerald-500/10 blur-3xl"></div>

        <div class="inline-flex items-center gap-2 rounded-full bg-zinc-900/60 ring-1 ring-zinc-800 px-3 py-1 text-sm text-zinc-200">
          ‚ú® BradyRip Card Vault
        </div>

        <h1 class="h1" style="margin-top:14px;">Browse my hits, rookies, and favorites.</h1>

<p class="subtle" style="margin-top:10px; max-width: 60ch;">
  Choose a sport ‚Üí choose a set ‚Üí tap a card to zoom.
</p>

        <div class="mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
          {sports.map((s) => (
            <a
              href={`/${s.slug}/`}
              class="group rounded-2xl bg-zinc-950 ring-1 ring-zinc-800 hover:ring-zinc-600 transition p-6"
            >
              <div class="text-sm text-zinc-300">{s.icon} {s.label}</div>
              <div class="mt-2 text-xl font-semibold tracking-tight">Browse sets ‚Üí</div>
              <div class="mt-2 text-sm text-zinc-400">
                View all sets and card images.
              </div>
            </a>
          ))}
        </div>
{/* Favorites + PSA tiles (same look as sports) */}
<div class="mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
  <a
    href="/favorites/"
    class="group rounded-2xl bg-zinc-950 ring-1 ring-zinc-800 hover:ring-zinc-600 transition p-6"
  >
    <div class="text-sm text-zinc-300">‚≠ê Favorites</div>
    <div class="mt-2 text-xl font-semibold tracking-tight">Open ‚Üí</div>
    <div class="mt-2 text-sm text-zinc-400">
      Your saved hits across all sports.
    </div>
  </a>

  <a
    href="/psa/"
    class="group rounded-2xl bg-zinc-950 ring-1 ring-zinc-800 hover:ring-zinc-600 transition p-6"
  >
    <div class="text-sm text-zinc-300">üßæ PSA Graded Cards</div>
    <div class="mt-2 text-xl font-semibold tracking-tight">Open ‚Üí</div>
    <div class="mt-2 text-sm text-zinc-400">
      Slabs only ‚Äî quick browse of graded cards.
    </div>
  </a>
</div>


{/* Card of the Week (compact) */}
<div class="mt-6">
  <div class="group rounded-2xl bg-zinc-950 ring-1 ring-zinc-800 hover:ring-zinc-600 transition p-6">
    <div class="flex items-center gap-4">
      <img
        id="cotwImg"
        alt="Card of the Week"
        class="h-20 w-20 rounded-xl ring-1 ring-zinc-800 bg-zinc-900 object-cover"
        loading="lazy"
        decoding="async"
      />
      <div class="min-w-0">
        <div class="text-sm text-zinc-300">üî• Card of the Week</div>
        <div id="cotwTitle" class="mt-2 text-xl font-semibold tracking-tight truncate">
          Random hit ‚Üí
        </div>
        <div id="cotwMeta" class="mt-1 text-sm text-zinc-400 truncate">
          Picked from ‚Äúgood cards‚Äù
        </div>

        <a
          id="cotwLink"
          href="/"
          class="mt-3 inline-flex items-center rounded-full bg-zinc-900/60 ring-1 ring-zinc-800 px-3 py-1 text-sm text-zinc-200 hover:ring-zinc-600 transition"
        >
          Open ‚Üí
        </a>
      </div>
    </div>
  </div>
</div>

<script is:inline>
  (async () => {
    try {
      const res = await fetch("/good-cards.json", { cache: "no-store" });
      const cards = await res.json();
      if (!Array.isArray(cards) || cards.length === 0) return;

      const pick = cards[Math.floor(Math.random() * cards.length)];

      // Try common field names defensively
      const imgSrc = pick.thumb || pick.thumbnail || pick.image || pick.img;
      const href = pick.href || pick.route || pick.page || pick.url || "/";
      const title =
        pick.title ||
        pick.name ||
        pick.player ||
        (pick.filename ? pick.filename.replace(/\.[^/.]+$/, "") : "Card of the Week");

      const metaParts = [];
      if (pick.sport) metaParts.push(pick.sport);
      if (pick.set) metaParts.push(pick.set);
      if (pick.year) metaParts.push(pick.year);

      const img = document.getElementById("cotwImg");
      const t = document.getElementById("cotwTitle");
      const m = document.getElementById("cotwMeta");
      const a = document.getElementById("cotwLink");

      if (img && imgSrc) img.src = imgSrc;
      if (t) t.textContent = title;
      if (m && metaParts.length) m.textContent = metaParts.join(" ‚Ä¢ ");
      if (a) a.href = href;
    } catch (e) {
      // fail silently
    }
  })();
</script>


        <div class="card" style="padding:16px; margin-top:18px;">
  <div class="kicker">About</div>
  <div class="subtle" style="margin-top:6px;">
    Updated regularly ‚Äî new uploads show up automatically.
  </div>
</div>
<!-- Contact (under About) -->
<div class="mt-4 card" style="padding: 14px 16px;">
  <div class="kicker">Contact</div>
  <p class="subtle" style="margin: 10px 0 0;">
    Email:
    <a class="btn" style="margin-left: 8px;" href="mailto:bradyripcards@gmail.com">
      bradyripcards@gmail.com
    </a>
  </p>
</div>


        <div class="mt-3 text-xs text-zinc-500">
          Build: {buildStamp}
        </div>
      </div>
    </main>
  </body>
</html>
